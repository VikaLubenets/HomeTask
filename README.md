# ШРИ Домашнее задание по автотестам

## Тестовые сценарии

### 1. Главная страница

- загрузка csv файла через drag&drop
    - ui тест наличия drag&drop на главной странице
        - unit test
    - выбор файла ограничен расширением csv 
        - unit test
    - e2e playwright test - пользователь перетаскивает корректный CSV-файл → файл загружается → отображается имя файла или превью данных
- загрузка csv файла через кнопку
    - наличие нужной кнопки 
    - по клику открывается выбор файла
    - выбор файла ограничен расширением csv 
- отправка таблицы в систему
    - данные загружаются постепенно 
        - unit тест api запроса 
        - unit тест функции хелпера для последовательного чтения стрима
    - данные накапливаются плавно 
        - unit тест изменения данных  
        - unit тест ui отображения
        - unit тест форматирования данных
        - e2e playwright тест плавного накапливания данных в ui 
    - есть индикатор загрузки
        - unit тест на отображение loader
        - e2e playwright тест плавной загрузки лоадера
    - ошибка корректно отображается при сбое
        - unit тест отображения кнопки ошибки
    - в localStorage сохраняется история
        - unit тест работы класса с localStorage 
        - unit тест изменения состояния localStorage после отработки запроса к апи
- кнопка очистить
    - пропадают хайлайты и подгруженный файл
        - unit тест удаления ui компонентов с хайлайтами и установки базовой кнопки 

### 2. Навигационное меню
- роутинг работает, страницы переключаются
    - unit тест изменения состояния роутера по клику на кнопку навигации и отображения страниц
    - e2e playwright тест переключения страниц

### 3. Страница генерации
- при клике на кнопку отправляется запрос за генерацией
    - unit тест отправки запроса по клику
    - unit тест самого запроса 
    - unit тест обработки ошибки
- автоматически начинается загрузка файла
    - unit тест автоматического скачивания файла


### 4. Страница истории
- при загрузке страницы данные выгружаются из localStorage 
    - unit тест источника данных из ls
- страница инициализируется со списком
    - unit тест ui отображения страницы при пустом ls
    - unit тест ui отображения страницы при наличии списка
- удаление отдельных записей истории
    - unit тест по клику на кнопку удаления пропадает ui элемент строки со статусом успешно
    - unit тест по клику на кнопку удаления пропадает ui элемент строки со статусом неуспешно
    - unit тест по клику на кнопку удаления удаляется этот элемент из ls
- при клике на пункт списка открывается модальное окно с хайлайтами
    - unit тест по клику на строку на странице появляется модальное окно
    - unit тест модальное окно содержит хайлайты
    - e2e playwright тест открытия модального окна
- кнопка очистки истории очищает localStorage
    - unit тест очищения ls 
- кнопка "сгенерировать больше" редиректит на страницу генерации
    - unit тест изменения роутинга
- если история пустая, нет кнопки "очистить историю"
    - unit тест на отстутствие лишних элементов при пустой истории



## Инструкции по запуску

npm i
npm run test - unit tests

npm run test:e2e:install - install browsers for e2e
npm run test:e2e - e2e tests

Используемые технологии


Vitest
React Testing Library
Playwright